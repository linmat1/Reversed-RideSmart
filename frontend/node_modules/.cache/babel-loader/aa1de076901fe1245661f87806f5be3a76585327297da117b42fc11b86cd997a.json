{"ast":null,"code":"import _objectSpread from\"/Users/linmat/Documents/GitHub/Reversed-RideSmart/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'./App.css';import MapSelector from'./MapSelector';import RouteMap from'./RouteMap';import LyftBooker from'./LyftBooker';import MaintenancePage from'./MaintenancePage';import BookingStatusPanel from'./BookingStatusPanel';import DeveloperPanel from'./DeveloperPanel';import{getApiBase,isApiMissing}from'./config';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const API_BASE=getApiBase();const[appMode,setAppMode]=useState('lyft');// 'normal' or 'lyft' - default to 'lyft'\nconst[showIndividualBooking,setShowIndividualBooking]=useState(false);// Track if individual booking is shown\nconst[proposals,setProposals]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[selectedProposal,setSelectedProposal]=useState(null);const[bookedRide,setBookedRide]=useState(null);const[booking,setBooking]=useState(false);const[cancelling,setCancelling]=useState(false);const[routes,setRoutes]=useState([]);const[selectedRoute,setSelectedRoute]=useState(null);const[loadingRoutes,setLoadingRoutes]=useState(true);const[searchMode,setSearchMode]=useState('map');// 'route' or 'map' - default to 'map'\nconst[mapOrigin,setMapOrigin]=useState(null);const[mapDestination,setMapDestination]=useState(null);const[mapSelectMode,setMapSelectMode]=useState('origin');// 'origin', 'destination', or 'none'\nconst[cancelledMessage,setCancelledMessage]=useState(null);const[routeData,setRouteData]=useState(null);const[loadingRoute,setLoadingRoute]=useState(false);const[users,setUsers]=useState([]);const[selectedUser,setSelectedUser]=useState(null);const[gettingLocation,setGettingLocation]=useState(false);const[centerOnOrigin,setCenterOnOrigin]=useState(false);// Only center when using current location\nconst[developerClickCount,setDeveloperClickCount]=useState(0);const[showDeveloperPanel,setShowDeveloperPanel]=useState(false);const handleDeveloperClick=()=>{const next=developerClickCount+1;if(next>=5){setShowDeveloperPanel(true);setDeveloperClickCount(0);}else{setDeveloperClickCount(next);}};useEffect(()=>{// Record website access for developer user log (IP, time, user-agent)\nfetch(\"\".concat(API_BASE,\"/api/developer/access\"),{method:'POST'}).catch(()=>{});// Fetch available users on component mount\nconst fetchUsers=async()=>{try{const response=await fetch(\"\".concat(API_BASE,\"/api/users\"));if(response.ok){const data=await response.json();setUsers(data.users||[]);if(data.users&&data.users.length>0){setSelectedUser(data.users[0].id);}}}catch(err){console.error('Error fetching users:',err);}};fetchUsers();// Fetch available routes on component mount\nconst fetchRoutes=async()=>{try{const response=await fetch(\"\".concat(API_BASE,\"/api/routes\"));if(response.ok){const data=await response.json();setRoutes(data.routes||[]);if(data.routes&&data.routes.length>0){setSelectedRoute(data.routes[0].id);}}}catch(err){console.error('Error fetching routes:',err);}finally{setLoadingRoutes(false);}};fetchRoutes();},[API_BASE]);const searchRides=async()=>{// Validate based on search mode\nif(searchMode==='route'&&!selectedRoute){setError('Please select a route');return;}if(searchMode==='map'&&(!mapOrigin||!mapDestination)){setError('Please select both origin and destination on the map');return;}setLoading(true);setError(null);setProposals([]);setSelectedProposal(null);setBookedRide(null);setCancelledMessage(null);try{let requestBody={user_id:selectedUser};if(searchMode==='route'){requestBody.route_id=selectedRoute;}else{// Map mode - send custom coordinates\nrequestBody.origin={latlng:{lat:mapOrigin.lat,lng:mapOrigin.lng},full_geocoded_addr:\"Custom Location (\".concat(mapOrigin.lat.toFixed(6),\", \").concat(mapOrigin.lng.toFixed(6),\")\"),geocoded_addr:\"(\".concat(mapOrigin.lat.toFixed(6),\", \").concat(mapOrigin.lng.toFixed(6),\")\")};requestBody.destination={latlng:{lat:mapDestination.lat,lng:mapDestination.lng},full_geocoded_addr:\"Custom Location (\".concat(mapDestination.lat.toFixed(6),\", \").concat(mapDestination.lng.toFixed(6),\")\"),geocoded_addr:\"(\".concat(mapDestination.lat.toFixed(6),\", \").concat(mapDestination.lng.toFixed(6),\")\")};}const response=await fetch(\"\".concat(API_BASE,\"/api/search\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(requestBody)});if(!response.ok){throw new Error('Search failed');}const data=await response.json();const proposalsList=data.proposals||[];if(proposalsList.length===0){setError('No ride proposals available.');}else{setProposals(proposalsList);}}catch(err){setError(err.message||'Error searching for rides');}finally{setLoading(false);}};const bookRide=async proposal=>{setSelectedProposal(proposal);setBooking(true);setError(null);try{let origin,destination;if(searchMode==='route'){const currentRoute=routes.find(r=>r.id===selectedRoute);origin=currentRoute===null||currentRoute===void 0?void 0:currentRoute.origin.data;destination=currentRoute===null||currentRoute===void 0?void 0:currentRoute.destination.data;}else{// Map mode - use map coordinates\norigin={latlng:{lat:mapOrigin.lat,lng:mapOrigin.lng},full_geocoded_addr:\"Custom Location (\".concat(mapOrigin.lat.toFixed(6),\", \").concat(mapOrigin.lng.toFixed(6),\")\"),geocoded_addr:\"(\".concat(mapOrigin.lat.toFixed(6),\", \").concat(mapOrigin.lng.toFixed(6),\")\")};destination={latlng:{lat:mapDestination.lat,lng:mapDestination.lng},full_geocoded_addr:\"Custom Location (\".concat(mapDestination.lat.toFixed(6),\", \").concat(mapDestination.lng.toFixed(6),\")\"),geocoded_addr:\"(\".concat(mapDestination.lat.toFixed(6),\", \").concat(mapDestination.lng.toFixed(6),\")\")};}// Determine ride type for better server-side status tracking\nconst proposalStr=JSON.stringify(proposal).toLowerCase();const rideType=proposalStr.includes('lyft')?'Lyft':'RideSmart';const response=await fetch(\"\".concat(API_BASE,\"/api/book\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prescheduled_ride_id:proposal.prescheduled_ride_id,proposal_uuid:proposal.proposal_uuid,origin:origin,destination:destination,user_id:selectedUser,ride_type:rideType})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Booking failed');}const data=await response.json();setBookedRide(_objectSpread(_objectSpread({},proposal),{},{bookingResponse:data}));// Fetch the route if route_identifier is available\nif(data.route_identifier){fetchRoute(data.route_identifier);}}catch(err){setError(err.message||'Error booking ride');}finally{setBooking(false);}};const fetchRoute=async routeIdentifier=>{setLoadingRoute(true);try{const response=await fetch(\"\".concat(API_BASE,\"/api/route/get\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({route_identifier:routeIdentifier})});if(response.ok){const data=await response.json();setRouteData(data);}}catch(err){console.error('Error fetching route:',err);}finally{setLoadingRoute(false);}};const cancelRide=async rideId=>{setCancelling(true);setError(null);try{const response=await fetch(\"\".concat(API_BASE,\"/api/cancel\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ride_id:rideId,user_id:selectedUser})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Cancellation failed');}await response.json();// Response is not used, but we need to consume it\nsetBookedRide(null);setSelectedProposal(null);setRouteData(null);setProposals([]);// Clear proposals to go back to home screen\nsetCancelledMessage('Ride cancelled successfully!');}catch(err){setError(err.message||'Error cancelling ride');}finally{setCancelling(false);}};const formatTime=timestamp=>{if(!timestamp)return'N/A';try{const date=new Date(timestamp*1000);return date.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit'});}catch(_unused){return'N/A';}};const getCurrentLocation=()=>{if(!navigator.geolocation){alert('Geolocation is not supported by your browser');return;}setGettingLocation(true);navigator.geolocation.getCurrentPosition(position=>{const coords={lat:position.coords.latitude,lng:position.coords.longitude};setMapOrigin(coords);setMapSelectMode('destination');setCenterOnOrigin(true);// Trigger map centering only for current location\nsetGettingLocation(false);// Reset centerOnOrigin after a brief moment so it can be triggered again if needed\nsetTimeout(()=>setCenterOnOrigin(false),100);},error=>{setGettingLocation(false);let errorMessage='Unable to get your location. ';switch(error.code){case error.PERMISSION_DENIED:errorMessage+='Please allow location access in your browser settings.';break;case error.POSITION_UNAVAILABLE:errorMessage+='Location information is unavailable.';break;case error.TIMEOUT:errorMessage+='Location request timed out.';break;default:errorMessage+='An unknown error occurred.';break;}alert(errorMessage);},{enableHighAccuracy:true,timeout:10000,maximumAge:0});};// Backend URL not set in production (avoids \"scan for local devices\" prompt)\nif(isApiMissing()){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",style:{padding:'2rem',textAlign:'center',maxWidth:'480px',margin:'0 auto'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"RideSmart\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#f87171',marginTop:'1rem'},children:[\"Backend URL not configured. Set \",/*#__PURE__*/_jsx(\"strong\",{children:\"REACT_APP_API_URL\"}),\" in your frontend project settings (e.g. Vercel Environment Variables) to your backend URL, then redeploy.\"]})]});}// Developer panel (5 clicks on \"Developer\")\nif(showDeveloperPanel){return/*#__PURE__*/_jsx(DeveloperPanel,{onClose:()=>setShowDeveloperPanel(false)});}// Check for maintenance mode\nconst maintenanceMode=process.env.REACT_APP_MAINTENANCE_MODE==='true';if(maintenanceMode){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BookingStatusPanel,{}),/*#__PURE__*/_jsx(MaintenancePage,{})]});}// If in Lyft Booker mode, show that component\nif(appMode==='lyft'){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(BookingStatusPanel,{}),/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-title\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"RideSmarter\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Get Free Lyft Rides\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"developer-toggle\",onClick:handleDeveloperClick,type:\"button\",children:\"Developer\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"info-section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"info-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"info-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Service Hours:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:\"5:00 PM \\u2013 4:00 AM\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Boundaries:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:\"You must book within RideSmart boundaries, or this app will show errors\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"IMPORTANT:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:\"Do not leave or refresh site while booking in progress\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"CONTACT:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:\"+447754666843 on WhatsApp\"})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mode-switch-section\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"individual-booking-button\",onClick:()=>{setAppMode('normal');setShowIndividualBooking(true);},children:\"\\uD83D\\uDCF1 Individual Booking\"}),/*#__PURE__*/_jsx(\"p\",{className:\"individual-booking-subtext\",children:\"Book normal RideSmart rides to your phone (no Lyft)\"})]}),/*#__PURE__*/_jsx(LyftBooker,{onBack:()=>setAppMode('normal')})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(BookingStatusPanel,{}),/*#__PURE__*/_jsx(\"header\",{className:\"App-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-title\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"RideSmart\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Search, Book, and Cancel Rides\"}),/*#__PURE__*/_jsx(\"button\",{className:\"lyft-mode-button\",onClick:()=>{setAppMode('lyft');setShowIndividualBooking(false);},children:\"\\uD83D\\uDE97 Lyft Booker Mode\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"developer-toggle\",onClick:handleDeveloperClick,type:\"button\",children:\"Developer\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"info-section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"info-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"info-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Service Hours:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:\"5:00 PM \\u2013 4:00 AM on weekdays\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Boundaries:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:\"You must book within RideSmart boundaries, or this app will show errors\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"IMPORTANT:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:\"Do not leave or refresh site while booking in progress\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"CONTACT:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:\"+447754666843 on WhatsApp\"})]})]})})}),/*#__PURE__*/_jsxs(\"main\",{className:\"App-main\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),cancelledMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"success-message cancelled-message\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u2713 \",cancelledMessage]}),/*#__PURE__*/_jsx(\"button\",{className:\"new-search-button\",onClick:()=>{setCancelledMessage(null);setShowIndividualBooking(false);},children:\"Start New Search\"})]}),!proposals.length&&!loading&&!bookedRide&&!cancelledMessage&&!showIndividualBooking&&/*#__PURE__*/_jsx(\"div\",{className:\"search-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"individual-booking-prompt\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Individual Ride Booking\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Book a single ride using RideSmart or Lyft\"}),/*#__PURE__*/_jsx(\"button\",{className:\"start-individual-booking-button\",onClick:()=>setShowIndividualBooking(true),children:\"Start Individual Booking\"})]})}),!proposals.length&&!loading&&!bookedRide&&!cancelledMessage&&showIndividualBooking&&/*#__PURE__*/_jsx(\"div\",{className:\"search-section\",children:loadingRoutes?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading routes...\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[users.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-selector\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"user-select\",className:\"user-label\",children:\"\\uD83D\\uDC64 Booking as:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"user-select\",value:selectedUser||'',onChange:e=>setSelectedUser(e.target.value),className:\"user-select\",children:users.map(user=>/*#__PURE__*/_jsx(\"option\",{value:user.id,children:user.name},user.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-mode-toggle\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"mode-toggle-btn \".concat(searchMode==='map'?'active':''),onClick:()=>{setSearchMode('map');setMapOrigin(null);setMapDestination(null);setMapSelectMode('origin');},children:\"Use Map\"}),/*#__PURE__*/_jsx(\"button\",{className:\"mode-toggle-btn \".concat(searchMode==='route'?'active':''),onClick:()=>{setSearchMode('route');setMapOrigin(null);setMapDestination(null);setMapSelectMode('origin');},children:\"Use Route\"})]}),searchMode==='route'?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"route-selector\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"route-select\",className:\"route-label\",children:\"Select Route:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"route-select\",value:selectedRoute||'',onChange:e=>setSelectedRoute(e.target.value),className:\"route-select\",children:routes.map(route=>/*#__PURE__*/_jsxs(\"option\",{value:route.id,children:[route.origin.name,\" \\u2192 \",route.destination.name]},route.id))})]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"map-controls\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"map-buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"map-current-location-btn\",onClick:getCurrentLocation,disabled:gettingLocation,title:\"Use your current location as origin\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 16 16\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"8\",cy:\"8\",r:\"4\",fill:\"currentColor\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"7\",y:\"2\",width:\"2\",height:\"2\",fill:\"currentColor\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"7\",y:\"12\",width:\"2\",height:\"2\",fill:\"currentColor\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"2\",y:\"7\",width:\"2\",height:\"2\",fill:\"currentColor\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"12\",y:\"7\",width:\"2\",height:\"2\",fill:\"currentColor\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"current-location-text\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Use current\"}),/*#__PURE__*/_jsx(\"span\",{children:\"location\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"map-select-btn \".concat(mapSelectMode==='origin'?'active':''),onClick:()=>setMapSelectMode('origin'),disabled:!mapOrigin&&mapSelectMode!=='origin',children:mapOrigin?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2713 Origin\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Set\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Set\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Origin\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"map-select-btn \".concat(mapSelectMode==='destination'?'active':''),onClick:()=>setMapSelectMode('destination'),disabled:!mapDestination&&mapSelectMode!=='destination',children:mapDestination?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2713 Destination\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Set\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Set\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Destination\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"map-clear-btn\",onClick:()=>{setMapOrigin(null);setMapDestination(null);setMapSelectMode('origin');},disabled:!mapOrigin&&!mapDestination,title:\"Clear all selected locations\",children:\"Clear All\"})]})}),/*#__PURE__*/_jsx(MapSelector,{origin:mapOrigin,destination:mapDestination,onOriginSelect:coords=>{setMapOrigin(coords);setMapSelectMode('destination');setCenterOnOrigin(false);// Don't center when manually clicking\n},onDestinationSelect:coords=>{setMapDestination(coords);setMapSelectMode('none');},selectMode:mapSelectMode,centerOnOrigin:centerOnOrigin})]}),/*#__PURE__*/_jsx(\"button\",{onClick:searchRides,className:\"search-button\",disabled:searchMode==='route'&&!selectedRoute||searchMode==='map'&&(!mapOrigin||!mapDestination),children:\"Search for Rides\"})]})}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Searching for rides...\"})}),proposals.length>0&&!bookedRide&&/*#__PURE__*/_jsxs(\"div\",{className:\"rides-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rides-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Available Rides\"}),searchMode==='route'&&selectedRoute&&routes.find(r=>r.id===selectedRoute)&&/*#__PURE__*/_jsx(\"div\",{className:\"current-route\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"route-indicator\",children:[routes.find(r=>r.id===selectedRoute).origin.name,\" \\u2192 \",routes.find(r=>r.id===selectedRoute).destination.name]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rides-list\",children:proposals.map((proposal,index)=>{const rideInfo=proposal.ride_info||{};const pickup=rideInfo.pickup||{};const eta=formatTime(pickup.eta_ts);// Determine if it's RideSmart or Lyft\n// Simple approach: scan the entire proposal for \"lyft\" anywhere\nconst proposalStr=JSON.stringify(proposal).toLowerCase();const isLyft=proposalStr.includes('lyft');const vehicleType=isLyft?'ðŸš— Lyft':'ðŸš RideSmart';return/*#__PURE__*/_jsxs(\"div\",{className:\"ride-card\",style:{animationDelay:\"\".concat(index*0.1,\"s\")},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ride-number\",children:[\"Ride #\",index+1]}),/*#__PURE__*/_jsx(\"div\",{className:\"ride-badge\",style:{background:isLyft?'#FF00BF':'#4ecdc4',color:'#fff',padding:'4px 10px',borderRadius:'12px',fontSize:'0.85rem',marginBottom:'10px',display:'inline-block'},children:vehicleType}),/*#__PURE__*/_jsxs(\"div\",{className:\"ride-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ride-field\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ETA:\"}),\" \",eta]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ride-field small\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Proposal ID:\"}),\" \",proposal.proposal_id||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{className:\"ride-field small\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ride ID:\"}),\" \",proposal.prescheduled_ride_id||'N/A']})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>bookRide(proposal),className:\"book-button\",disabled:booking,children:booking&&(selectedProposal===null||selectedProposal===void 0?void 0:selectedProposal.proposal_uuid)===proposal.proposal_uuid?'Booking...':'Book This Ride'})]},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-again-section\",children:[searchMode==='route'&&/*#__PURE__*/_jsxs(\"div\",{className:\"route-selector\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"route-select-again\",className:\"route-label\",children:\"Change Route:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"route-select-again\",value:selectedRoute||'',onChange:e=>setSelectedRoute(e.target.value),className:\"route-select\",children:routes.map(route=>/*#__PURE__*/_jsxs(\"option\",{value:route.id,children:[route.origin.name,\" \\u2192 \",route.destination.name]},route.id))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{searchRides();},className:\"search-again-button\",children:\"Search Again\"})]})]}),booking&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Booking ride...\"})}),bookedRide&&/*#__PURE__*/_jsxs(\"div\",{className:\"booked-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"success-message\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2713 Ride Booked Successfully!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"booked-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ride ID:\"}),\" \",bookedRide.prescheduled_ride_id]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Proposal UUID:\"}),\" \",bookedRide.proposal_uuid]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCF1 Check your phone\"}),\" - the ride details will be sent there\"]})]})]}),loadingRoute&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading route...\"})}),/*#__PURE__*/_jsx(RouteMap,{routeData:routeData,bookingData:bookedRide===null||bookedRide===void 0?void 0:bookedRide.bookingResponse}),/*#__PURE__*/_jsxs(\"div\",{className:\"cancel-section\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>cancelRide(bookedRide.prescheduled_ride_id),className:\"cancel-button\",disabled:cancelling,children:cancelling?'Cancelling...':'Cancel This Ride'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setBookedRide(null);setSelectedProposal(null);setProposals([]);setRouteData(null);setShowIndividualBooking(false);},className:\"new-search-button\",children:\"New Search\"})]})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","MapSelector","RouteMap","LyftBooker","MaintenancePage","BookingStatusPanel","DeveloperPanel","getApiBase","isApiMissing","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","API_BASE","appMode","setAppMode","showIndividualBooking","setShowIndividualBooking","proposals","setProposals","loading","setLoading","error","setError","selectedProposal","setSelectedProposal","bookedRide","setBookedRide","booking","setBooking","cancelling","setCancelling","routes","setRoutes","selectedRoute","setSelectedRoute","loadingRoutes","setLoadingRoutes","searchMode","setSearchMode","mapOrigin","setMapOrigin","mapDestination","setMapDestination","mapSelectMode","setMapSelectMode","cancelledMessage","setCancelledMessage","routeData","setRouteData","loadingRoute","setLoadingRoute","users","setUsers","selectedUser","setSelectedUser","gettingLocation","setGettingLocation","centerOnOrigin","setCenterOnOrigin","developerClickCount","setDeveloperClickCount","showDeveloperPanel","setShowDeveloperPanel","handleDeveloperClick","next","fetch","concat","method","catch","fetchUsers","response","ok","data","json","length","id","err","console","fetchRoutes","searchRides","requestBody","user_id","route_id","origin","latlng","lat","lng","full_geocoded_addr","toFixed","geocoded_addr","destination","headers","body","JSON","stringify","Error","proposalsList","message","bookRide","proposal","currentRoute","find","r","proposalStr","toLowerCase","rideType","includes","prescheduled_ride_id","proposal_uuid","ride_type","errorData","_objectSpread","bookingResponse","route_identifier","fetchRoute","routeIdentifier","cancelRide","rideId","ride_id","formatTime","timestamp","date","Date","toLocaleTimeString","hour","minute","_unused","getCurrentLocation","navigator","geolocation","alert","getCurrentPosition","position","coords","latitude","longitude","setTimeout","errorMessage","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","enableHighAccuracy","timeout","maximumAge","className","style","padding","textAlign","maxWidth","margin","children","color","marginTop","onClose","maintenanceMode","process","env","REACT_APP_MAINTENANCE_MODE","onClick","type","onBack","htmlFor","value","onChange","e","target","map","user","name","route","disabled","title","width","height","viewBox","fill","xmlns","cx","cy","x","y","onOriginSelect","onDestinationSelect","selectMode","index","rideInfo","ride_info","pickup","eta","eta_ts","isLyft","vehicleType","animationDelay","background","borderRadius","fontSize","marginBottom","display","proposal_id","bookingData"],"sources":["/Users/linmat/Documents/GitHub/Reversed-RideSmart/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport MapSelector from './MapSelector';\nimport RouteMap from './RouteMap';\nimport LyftBooker from './LyftBooker';\nimport MaintenancePage from './MaintenancePage';\nimport BookingStatusPanel from './BookingStatusPanel';\nimport DeveloperPanel from './DeveloperPanel';\nimport { getApiBase, isApiMissing } from './config';\n\nfunction App() {\n  const API_BASE = getApiBase();\n  const [appMode, setAppMode] = useState('lyft'); // 'normal' or 'lyft' - default to 'lyft'\n  const [showIndividualBooking, setShowIndividualBooking] = useState(false); // Track if individual booking is shown\n  const [proposals, setProposals] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [selectedProposal, setSelectedProposal] = useState(null);\n  const [bookedRide, setBookedRide] = useState(null);\n  const [booking, setBooking] = useState(false);\n  const [cancelling, setCancelling] = useState(false);\n  const [routes, setRoutes] = useState([]);\n  const [selectedRoute, setSelectedRoute] = useState(null);\n  const [loadingRoutes, setLoadingRoutes] = useState(true);\n  const [searchMode, setSearchMode] = useState('map'); // 'route' or 'map' - default to 'map'\n  const [mapOrigin, setMapOrigin] = useState(null);\n  const [mapDestination, setMapDestination] = useState(null);\n  const [mapSelectMode, setMapSelectMode] = useState('origin'); // 'origin', 'destination', or 'none'\n  const [cancelledMessage, setCancelledMessage] = useState(null);\n  const [routeData, setRouteData] = useState(null);\n  const [loadingRoute, setLoadingRoute] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [gettingLocation, setGettingLocation] = useState(false);\n  const [centerOnOrigin, setCenterOnOrigin] = useState(false); // Only center when using current location\n  const [developerClickCount, setDeveloperClickCount] = useState(0);\n  const [showDeveloperPanel, setShowDeveloperPanel] = useState(false);\n\n  const handleDeveloperClick = () => {\n    const next = developerClickCount + 1;\n    if (next >= 5) {\n      setShowDeveloperPanel(true);\n      setDeveloperClickCount(0);\n    } else {\n      setDeveloperClickCount(next);\n    }\n  };\n\n  useEffect(() => {\n    // Record website access for developer user log (IP, time, user-agent)\n    fetch(`${API_BASE}/api/developer/access`, { method: 'POST' }).catch(() => {});\n\n    // Fetch available users on component mount\n    const fetchUsers = async () => {\n      try {\n        const response = await fetch(`${API_BASE}/api/users`);\n        if (response.ok) {\n          const data = await response.json();\n          setUsers(data.users || []);\n          if (data.users && data.users.length > 0) {\n            setSelectedUser(data.users[0].id);\n          }\n        }\n      } catch (err) {\n        console.error('Error fetching users:', err);\n      }\n    };\n    fetchUsers();\n\n    // Fetch available routes on component mount\n    const fetchRoutes = async () => {\n      try {\n        const response = await fetch(`${API_BASE}/api/routes`);\n        if (response.ok) {\n          const data = await response.json();\n          setRoutes(data.routes || []);\n          if (data.routes && data.routes.length > 0) {\n            setSelectedRoute(data.routes[0].id);\n          }\n        }\n      } catch (err) {\n        console.error('Error fetching routes:', err);\n      } finally {\n        setLoadingRoutes(false);\n      }\n    };\n    fetchRoutes();\n  }, [API_BASE]);\n\n  const searchRides = async () => {\n    // Validate based on search mode\n    if (searchMode === 'route' && !selectedRoute) {\n      setError('Please select a route');\n      return;\n    }\n    \n    if (searchMode === 'map' && (!mapOrigin || !mapDestination)) {\n      setError('Please select both origin and destination on the map');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n    setProposals([]);\n    setSelectedProposal(null);\n    setBookedRide(null);\n    setCancelledMessage(null);\n\n    try {\n      let requestBody = { user_id: selectedUser };\n      \n      if (searchMode === 'route') {\n        requestBody.route_id = selectedRoute;\n      } else {\n        // Map mode - send custom coordinates\n        requestBody.origin = {\n            latlng: {\n              lat: mapOrigin.lat,\n              lng: mapOrigin.lng\n            },\n            full_geocoded_addr: `Custom Location (${mapOrigin.lat.toFixed(6)}, ${mapOrigin.lng.toFixed(6)})`,\n            geocoded_addr: `(${mapOrigin.lat.toFixed(6)}, ${mapOrigin.lng.toFixed(6)})`\n        };\n        requestBody.destination = {\n            latlng: {\n              lat: mapDestination.lat,\n              lng: mapDestination.lng\n            },\n            full_geocoded_addr: `Custom Location (${mapDestination.lat.toFixed(6)}, ${mapDestination.lng.toFixed(6)})`,\n            geocoded_addr: `(${mapDestination.lat.toFixed(6)}, ${mapDestination.lng.toFixed(6)})`\n        };\n      }\n\n      const response = await fetch(`${API_BASE}/api/search`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(requestBody),\n      });\n\n      if (!response.ok) {\n        throw new Error('Search failed');\n      }\n\n      const data = await response.json();\n      const proposalsList = data.proposals || [];\n\n      if (proposalsList.length === 0) {\n        setError('No ride proposals available.');\n      } else {\n        setProposals(proposalsList);\n      }\n    } catch (err) {\n      setError(err.message || 'Error searching for rides');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const bookRide = async (proposal) => {\n    setSelectedProposal(proposal);\n    setBooking(true);\n    setError(null);\n\n    try {\n      let origin, destination;\n      \n      if (searchMode === 'route') {\n        const currentRoute = routes.find(r => r.id === selectedRoute);\n        origin = currentRoute?.origin.data;\n        destination = currentRoute?.destination.data;\n      } else {\n        // Map mode - use map coordinates\n        origin = {\n          latlng: {\n            lat: mapOrigin.lat,\n            lng: mapOrigin.lng\n          },\n          full_geocoded_addr: `Custom Location (${mapOrigin.lat.toFixed(6)}, ${mapOrigin.lng.toFixed(6)})`,\n          geocoded_addr: `(${mapOrigin.lat.toFixed(6)}, ${mapOrigin.lng.toFixed(6)})`\n        };\n        destination = {\n          latlng: {\n            lat: mapDestination.lat,\n            lng: mapDestination.lng\n          },\n          full_geocoded_addr: `Custom Location (${mapDestination.lat.toFixed(6)}, ${mapDestination.lng.toFixed(6)})`,\n          geocoded_addr: `(${mapDestination.lat.toFixed(6)}, ${mapDestination.lng.toFixed(6)})`\n        };\n      }\n\n      // Determine ride type for better server-side status tracking\n      const proposalStr = JSON.stringify(proposal).toLowerCase();\n      const rideType = proposalStr.includes('lyft') ? 'Lyft' : 'RideSmart';\n\n      const response = await fetch(`${API_BASE}/api/book`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          prescheduled_ride_id: proposal.prescheduled_ride_id,\n          proposal_uuid: proposal.proposal_uuid,\n          origin: origin,\n          destination: destination,\n          user_id: selectedUser,\n          ride_type: rideType,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Booking failed');\n      }\n\n      const data = await response.json();\n      setBookedRide({\n        ...proposal,\n        bookingResponse: data,\n      });\n      \n      // Fetch the route if route_identifier is available\n      if (data.route_identifier) {\n        fetchRoute(data.route_identifier);\n      }\n    } catch (err) {\n      setError(err.message || 'Error booking ride');\n    } finally {\n      setBooking(false);\n    }\n  };\n\n  const fetchRoute = async (routeIdentifier) => {\n    setLoadingRoute(true);\n    try {\n      const response = await fetch(`${API_BASE}/api/route/get`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          route_identifier: routeIdentifier,\n        }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setRouteData(data);\n      }\n    } catch (err) {\n      console.error('Error fetching route:', err);\n    } finally {\n      setLoadingRoute(false);\n    }\n  };\n\n  const cancelRide = async (rideId) => {\n    setCancelling(true);\n    setError(null);\n\n    try {\n      const response = await fetch(`${API_BASE}/api/cancel`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ride_id: rideId,\n          user_id: selectedUser,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Cancellation failed');\n      }\n\n      await response.json(); // Response is not used, but we need to consume it\n      setBookedRide(null);\n      setSelectedProposal(null);\n      setRouteData(null);\n      setProposals([]);  // Clear proposals to go back to home screen\n      setCancelledMessage('Ride cancelled successfully!');\n    } catch (err) {\n      setError(err.message || 'Error cancelling ride');\n    } finally {\n      setCancelling(false);\n    }\n  };\n\n  const formatTime = (timestamp) => {\n    if (!timestamp) return 'N/A';\n    try {\n      const date = new Date(timestamp * 1000);\n      return date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });\n    } catch {\n      return 'N/A';\n    }\n  };\n\n  const getCurrentLocation = () => {\n    if (!navigator.geolocation) {\n      alert('Geolocation is not supported by your browser');\n      return;\n    }\n\n    setGettingLocation(true);\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const coords = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n        setMapOrigin(coords);\n        setMapSelectMode('destination');\n        setCenterOnOrigin(true); // Trigger map centering only for current location\n        setGettingLocation(false);\n        // Reset centerOnOrigin after a brief moment so it can be triggered again if needed\n        setTimeout(() => setCenterOnOrigin(false), 100);\n      },\n      (error) => {\n        setGettingLocation(false);\n        let errorMessage = 'Unable to get your location. ';\n        switch (error.code) {\n          case error.PERMISSION_DENIED:\n            errorMessage += 'Please allow location access in your browser settings.';\n            break;\n          case error.POSITION_UNAVAILABLE:\n            errorMessage += 'Location information is unavailable.';\n            break;\n          case error.TIMEOUT:\n            errorMessage += 'Location request timed out.';\n            break;\n          default:\n            errorMessage += 'An unknown error occurred.';\n            break;\n        }\n        alert(errorMessage);\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 0\n      }\n    );\n  };\n\n  // Backend URL not set in production (avoids \"scan for local devices\" prompt)\n  if (isApiMissing()) {\n    return (\n      <div className=\"App\" style={{ padding: '2rem', textAlign: 'center', maxWidth: '480px', margin: '0 auto' }}>\n        <h1>RideSmart</h1>\n        <p style={{ color: '#f87171', marginTop: '1rem' }}>\n          Backend URL not configured. Set <strong>REACT_APP_API_URL</strong> in your frontend project settings (e.g. Vercel Environment Variables) to your backend URL, then redeploy.\n        </p>\n      </div>\n    );\n  }\n\n  // Developer panel (5 clicks on \"Developer\")\n  if (showDeveloperPanel) {\n    return (\n      <DeveloperPanel onClose={() => setShowDeveloperPanel(false)} />\n    );\n  }\n\n  // Check for maintenance mode\n  const maintenanceMode = process.env.REACT_APP_MAINTENANCE_MODE === 'true';\n  \n  if (maintenanceMode) {\n    return (\n      <>\n        <BookingStatusPanel />\n        <MaintenancePage />\n      </>\n    );\n  }\n\n  // If in Lyft Booker mode, show that component\n  if (appMode === 'lyft') {\n    return (\n      <div className=\"App\">\n        <BookingStatusPanel />\n        <header className=\"App-header\">\n          <div className=\"header-content\">\n            <div className=\"header-title\">\n              <h1>RideSmarter</h1>\n              <p>Get Free Lyft Rides</p>\n            </div>\n            <button className=\"developer-toggle\" onClick={handleDeveloperClick} type=\"button\">\n              Developer\n            </button>\n          </div>\n        </header>\n\n        <div className=\"info-section\">\n          <div className=\"info-card\">\n            <div className=\"info-content\">\n              <div className=\"info-item\">\n                <span className=\"info-label\">Service Hours:</span>\n                <span className=\"info-value\">5:00 PM â€“ 4:00 AM</span>\n              </div>\n              <div className=\"info-item\">\n                <span className=\"info-label\">Boundaries:</span>\n                <span className=\"info-value\">You must book within RideSmart boundaries, or this app will show errors</span>\n              </div>\n              <div className=\"info-item\">\n                <span className=\"info-label\">IMPORTANT:</span>\n                <span className=\"info-value\">Do not leave or refresh site while booking in progress</span>\n              </div>\n              <div className=\"info-item\">\n                <span className=\"info-label\">CONTACT:</span>\n                <span className=\"info-value\">+447754666843 on WhatsApp</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mode-switch-section\">\n          <button \n            className=\"individual-booking-button\"\n            onClick={() => {\n              setAppMode('normal');\n              setShowIndividualBooking(true);\n            }}\n          >\n            ðŸ“± Individual Booking\n          </button>\n          <p className=\"individual-booking-subtext\">\n            Book normal RideSmart rides to your phone (no Lyft)\n          </p>\n        </div>\n\n        <LyftBooker onBack={() => setAppMode('normal')} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      <BookingStatusPanel />\n      <header className=\"App-header\">\n        <div className=\"header-content\">\n          <div className=\"header-title\">\n            <h1>RideSmart</h1>\n            <p>Search, Book, and Cancel Rides</p>\n            <button \n              className=\"lyft-mode-button\"\n              onClick={() => {\n                setAppMode('lyft');\n                setShowIndividualBooking(false);\n              }}\n            >\n              ðŸš— Lyft Booker Mode\n            </button>\n          </div>\n          <button className=\"developer-toggle\" onClick={handleDeveloperClick} type=\"button\">\n            Developer\n          </button>\n        </div>\n      </header>\n\n      <div className=\"info-section\">\n        <div className=\"info-card\">\n          <div className=\"info-content\">\n            <div className=\"info-item\">\n              <span className=\"info-label\">Service Hours:</span>\n              <span className=\"info-value\">5:00 PM â€“ 4:00 AM on weekdays</span>\n            </div>\n            <div className=\"info-item\">\n              <span className=\"info-label\">Boundaries:</span>\n              <span className=\"info-value\">You must book within RideSmart boundaries, or this app will show errors</span>\n            </div>\n            <div className=\"info-item\">\n              <span className=\"info-label\">IMPORTANT:</span>\n              <span className=\"info-value\">Do not leave or refresh site while booking in progress</span>\n            </div>\n            <div className=\"info-item\">\n              <span className=\"info-label\">CONTACT:</span>\n              <span className=\"info-value\">+447754666843 on WhatsApp</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <main className=\"App-main\">\n        {error && (\n          <div className=\"error-message\">\n            {error}\n          </div>\n        )}\n\n        {cancelledMessage && (\n          <div className=\"success-message cancelled-message\">\n            <h2>âœ“ {cancelledMessage}</h2>\n            <button \n              className=\"new-search-button\"\n              onClick={() => {\n                setCancelledMessage(null);\n                setShowIndividualBooking(false);\n              }}\n            >\n              Start New Search\n            </button>\n          </div>\n        )}\n\n        {!proposals.length && !loading && !bookedRide && !cancelledMessage && !showIndividualBooking && (\n          <div className=\"search-section\">\n            <div className=\"individual-booking-prompt\">\n              <h2>Individual Ride Booking</h2>\n              <p>Book a single ride using RideSmart or Lyft</p>\n              <button \n                className=\"start-individual-booking-button\"\n                onClick={() => setShowIndividualBooking(true)}\n              >\n                Start Individual Booking\n              </button>\n            </div>\n          </div>\n        )}\n\n        {!proposals.length && !loading && !bookedRide && !cancelledMessage && showIndividualBooking && (\n          <div className=\"search-section\">\n            {loadingRoutes ? (\n              <div className=\"loading\">\n                <p>Loading routes...</p>\n              </div>\n            ) : (\n              <>\n                {/* User Selector */}\n                {users.length > 0 && (\n                  <div className=\"user-selector\">\n                    <label htmlFor=\"user-select\" className=\"user-label\">\n                      ðŸ‘¤ Booking as:\n                    </label>\n                    <select\n                      id=\"user-select\"\n                      value={selectedUser || ''}\n                      onChange={(e) => setSelectedUser(e.target.value)}\n                      className=\"user-select\"\n                    >\n                      {users.map((user) => (\n                        <option key={user.id} value={user.id}>\n                          {user.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                )}\n\n                <div className=\"search-mode-toggle\">\n                  <button\n                    className={`mode-toggle-btn ${searchMode === 'map' ? 'active' : ''}`}\n                    onClick={() => {\n                      setSearchMode('map');\n                      setMapOrigin(null);\n                      setMapDestination(null);\n                      setMapSelectMode('origin');\n                    }}\n                  >\n                    Use Map\n                  </button>\n                  <button\n                    className={`mode-toggle-btn ${searchMode === 'route' ? 'active' : ''}`}\n                    onClick={() => {\n                      setSearchMode('route');\n                      setMapOrigin(null);\n                      setMapDestination(null);\n                      setMapSelectMode('origin');\n                    }}\n                  >\n                    Use Route\n                  </button>\n                </div>\n\n                {searchMode === 'route' ? (\n                  <>\n                    <div className=\"route-selector\">\n                      <label htmlFor=\"route-select\" className=\"route-label\">\n                        Select Route:\n                      </label>\n                      <select\n                        id=\"route-select\"\n                        value={selectedRoute || ''}\n                        onChange={(e) => setSelectedRoute(e.target.value)}\n                        className=\"route-select\"\n                      >\n                        {routes.map((route) => (\n                          <option key={route.id} value={route.id}>\n                            {route.origin.name} â†’ {route.destination.name}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  </>\n                ) : (\n                  <>\n                    <div className=\"map-controls\">\n                      <div className=\"map-buttons\">\n                        <button\n                          className=\"map-current-location-btn\"\n                          onClick={getCurrentLocation}\n                          disabled={gettingLocation}\n                          title=\"Use your current location as origin\"\n                        >\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <circle cx=\"8\" cy=\"8\" r=\"4\" fill=\"currentColor\"/>\n                            <rect x=\"7\" y=\"2\" width=\"2\" height=\"2\" fill=\"currentColor\"/>\n                            <rect x=\"7\" y=\"12\" width=\"2\" height=\"2\" fill=\"currentColor\"/>\n                            <rect x=\"2\" y=\"7\" width=\"2\" height=\"2\" fill=\"currentColor\"/>\n                            <rect x=\"12\" y=\"7\" width=\"2\" height=\"2\" fill=\"currentColor\"/>\n                          </svg>\n                          <span className=\"current-location-text\">\n                            <span>Use current</span>\n                            <span>location</span>\n                          </span>\n                        </button>\n                        <button\n                          className={`map-select-btn ${mapSelectMode === 'origin' ? 'active' : ''}`}\n                          onClick={() => setMapSelectMode('origin')}\n                          disabled={!mapOrigin && mapSelectMode !== 'origin'}\n                        >\n                          {mapOrigin ? (\n                            <>\n                              <span>âœ“ Origin</span>\n                              <span>Set</span>\n                            </>\n                          ) : (\n                            <>\n                              <span>Set</span>\n                              <span>Origin</span>\n                            </>\n                          )}\n                        </button>\n                        <button\n                          className={`map-select-btn ${mapSelectMode === 'destination' ? 'active' : ''}`}\n                          onClick={() => setMapSelectMode('destination')}\n                          disabled={!mapDestination && mapSelectMode !== 'destination'}\n                        >\n                          {mapDestination ? (\n                            <>\n                              <span>âœ“ Destination</span>\n                              <span>Set</span>\n                            </>\n                          ) : (\n                            <>\n                              <span>Set</span>\n                              <span>Destination</span>\n                            </>\n                          )}\n                        </button>\n                        <button\n                          className=\"map-clear-btn\"\n                          onClick={() => {\n                            setMapOrigin(null);\n                            setMapDestination(null);\n                            setMapSelectMode('origin');\n                          }}\n                          disabled={!mapOrigin && !mapDestination}\n                          title=\"Clear all selected locations\"\n                        >\n                          Clear All\n                        </button>\n                      </div>\n                    </div>\n                    <MapSelector\n                      origin={mapOrigin}\n                      destination={mapDestination}\n                      onOriginSelect={(coords) => {\n                        setMapOrigin(coords);\n                        setMapSelectMode('destination');\n                        setCenterOnOrigin(false); // Don't center when manually clicking\n                      }}\n                      onDestinationSelect={(coords) => {\n                        setMapDestination(coords);\n                        setMapSelectMode('none');\n                      }}\n                      selectMode={mapSelectMode}\n                      centerOnOrigin={centerOnOrigin}\n                    />\n                  </>\n                )}\n\n                <button \n                  onClick={searchRides} \n                  className=\"search-button\"\n                  disabled={\n                    (searchMode === 'route' && !selectedRoute) ||\n                    (searchMode === 'map' && (!mapOrigin || !mapDestination))\n                  }\n                >\n                  Search for Rides\n                </button>\n              </>\n            )}\n          </div>\n        )}\n\n        {loading && (\n          <div className=\"loading\">\n            <p>Searching for rides...</p>\n          </div>\n        )}\n\n        {proposals.length > 0 && !bookedRide && (\n          <div className=\"rides-section\">\n            <div className=\"rides-header\">\n              <h2>Available Rides</h2>\n              {searchMode === 'route' && selectedRoute && routes.find(r => r.id === selectedRoute) && (\n                <div className=\"current-route\">\n                  <span className=\"route-indicator\">\n                    {routes.find(r => r.id === selectedRoute).origin.name} â†’ {routes.find(r => r.id === selectedRoute).destination.name}\n                  </span>\n                </div>\n              )}\n            </div>\n            <div className=\"rides-list\">\n              {proposals.map((proposal, index) => {\n                const rideInfo = proposal.ride_info || {};\n                const pickup = rideInfo.pickup || {};\n                const eta = formatTime(pickup.eta_ts);\n                \n                // Determine if it's RideSmart or Lyft\n                // Simple approach: scan the entire proposal for \"lyft\" anywhere\n                const proposalStr = JSON.stringify(proposal).toLowerCase();\n                const isLyft = proposalStr.includes('lyft');\n                const vehicleType = isLyft ? 'ðŸš— Lyft' : 'ðŸš RideSmart';\n\n                return (\n                  <div key={index} className=\"ride-card\" style={{ animationDelay: `${index * 0.1}s` }}>\n                    <div className=\"ride-number\">Ride #{index + 1}</div>\n                    <div className=\"ride-badge\" style={{ \n                      background: isLyft ? '#FF00BF' : '#4ecdc4',\n                      color: '#fff',\n                      padding: '4px 10px',\n                      borderRadius: '12px',\n                      fontSize: '0.85rem',\n                      marginBottom: '10px',\n                      display: 'inline-block'\n                    }}>\n                      {vehicleType}\n                    </div>\n                    <div className=\"ride-details\">\n                      <div className=\"ride-field\">\n                        <strong>ETA:</strong> {eta}\n                      </div>\n                      <div className=\"ride-field small\">\n                        <strong>Proposal ID:</strong> {proposal.proposal_id || 'N/A'}\n                      </div>\n                      <div className=\"ride-field small\">\n                        <strong>Ride ID:</strong> {proposal.prescheduled_ride_id || 'N/A'}\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => bookRide(proposal)}\n                      className=\"book-button\"\n                      disabled={booking}\n                    >\n                      {booking && selectedProposal?.proposal_uuid === proposal.proposal_uuid\n                        ? 'Booking...'\n                        : 'Book This Ride'}\n                    </button>\n                  </div>\n                );\n              })}\n            </div>\n            <div className=\"search-again-section\">\n              {searchMode === 'route' && (\n                <div className=\"route-selector\">\n                  <label htmlFor=\"route-select-again\" className=\"route-label\">\n                    Change Route:\n                  </label>\n                  <select\n                    id=\"route-select-again\"\n                    value={selectedRoute || ''}\n                    onChange={(e) => setSelectedRoute(e.target.value)}\n                    className=\"route-select\"\n                  >\n                    {routes.map((route) => (\n                      <option key={route.id} value={route.id}>\n                        {route.origin.name} â†’ {route.destination.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              )}\n              <button \n                onClick={() => {\n                  searchRides();\n                }} \n                className=\"search-again-button\"\n              >\n                Search Again\n              </button>\n            </div>\n          </div>\n        )}\n\n        {booking && (\n          <div className=\"loading\">\n            <p>Booking ride...</p>\n          </div>\n        )}\n\n        {bookedRide && (\n          <div className=\"booked-section\">\n            <div className=\"success-message\">\n              <h2>âœ“ Ride Booked Successfully!</h2>\n              <div className=\"booked-details\">\n                <p><strong>Ride ID:</strong> {bookedRide.prescheduled_ride_id}</p>\n                <p><strong>Proposal UUID:</strong> {bookedRide.proposal_uuid}</p>\n                <p><strong>ðŸ“± Check your phone</strong> - the ride details will be sent there</p>\n              </div>\n            </div>\n            \n            {/* Route Map Display */}\n            {loadingRoute && (\n              <div className=\"loading\">\n                <p>Loading route...</p>\n              </div>\n            )}\n            <RouteMap \n              routeData={routeData} \n              bookingData={bookedRide?.bookingResponse} \n            />\n            \n            <div className=\"cancel-section\">\n              <button\n                onClick={() => cancelRide(bookedRide.prescheduled_ride_id)}\n                className=\"cancel-button\"\n                disabled={cancelling}\n              >\n                {cancelling ? 'Cancelling...' : 'Cancel This Ride'}\n              </button>\n              <button\n                onClick={() => {\n                  setBookedRide(null);\n                  setSelectedProposal(null);\n                  setProposals([]);\n                  setRouteData(null);\n                  setShowIndividualBooking(false);\n                }}\n                className=\"new-search-button\"\n              >\n                New Search\n              </button>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}