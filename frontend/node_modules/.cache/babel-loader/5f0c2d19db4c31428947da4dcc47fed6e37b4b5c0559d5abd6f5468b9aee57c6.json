{"ast":null,"code":"import React,{useEffect,useState}from'react';import{MapContainer,TileLayer,Marker,useMapEvents,useMap}from'react-leaflet';import L from'leaflet';import'leaflet/dist/leaflet.css';import'./MapSelector.css';// Fix for default marker icons in react-leaflet\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png',iconUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png'});// Custom icon for origin (green)\nconst originIcon=new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});// Custom icon for destination (red)\nconst destinationIcon=new L.Icon({iconUrl:'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});// Component to handle map clicks\nfunction MapClickHandler(_ref){let{onMapClick,selectMode}=_ref;useMapEvents({click(e){if(selectMode==='origin'||selectMode==='destination'){onMapClick(e.latlng,selectMode);}}});return null;}// Component to center map on a specific location (only used when explicitly needed)\nfunction MapCenter(_ref2){let{center,zoom,shouldCenter}=_ref2;const map=useMap();useEffect(()=>{if(shouldCenter&&center){map.setView(center,zoom||map.getZoom());}},[shouldCenter,center,zoom,map]);return null;}function MapSelector(_ref3){let{origin,destination,onOriginSelect,onDestinationSelect,selectMode,centerOnOrigin}=_ref3;const[mapReady,setMapReady]=useState(false);useEffect(()=>{setMapReady(true);},[]);const handleMapClick=(latlng,mode)=>{const coords={lat:latlng.lat,lng:latlng.lng};if(mode==='origin'){onOriginSelect(coords);}else if(mode==='destination'){onDestinationSelect(coords);}};// Default center (University of Chicago area)\nconst defaultCenter=[41.788064,-87.601145];const defaultZoom=13;if(!mapReady){return/*#__PURE__*/_jsx(\"div\",{className:\"map-loading\",children:\"Loading map...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"map-selector-container\",children:[/*#__PURE__*/_jsxs(MapContainer,{center:defaultCenter,zoom:defaultZoom,style:{height:'400px',width:'100%',borderRadius:'12px'},className:\"map-container\",children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),centerOnOrigin&&origin&&/*#__PURE__*/_jsx(MapCenter,{center:[origin.lat,origin.lng],zoom:15,shouldCenter:centerOnOrigin}),/*#__PURE__*/_jsx(MapClickHandler,{onMapClick:handleMapClick,selectMode:selectMode}),origin&&/*#__PURE__*/_jsx(Marker,{position:[origin.lat,origin.lng],icon:originIcon}),destination&&/*#__PURE__*/_jsx(Marker,{position:[destination.lat,destination.lng],icon:destinationIcon})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"map-instructions\",children:[selectMode==='origin'&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Click on the map to set the \",/*#__PURE__*/_jsx(\"strong\",{children:\"origin\"}),\" (green marker)\"]}),selectMode==='destination'&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Click on the map to set the \",/*#__PURE__*/_jsx(\"strong\",{children:\"destination\"}),\" (red marker)\"]}),selectMode==='none'&&origin&&destination&&/*#__PURE__*/_jsx(\"p\",{children:\"Both locations selected. Click \\\"Search for Rides\\\" to continue.\"})]})]});}export default MapSelector;","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Marker","useMapEvents","useMap","L","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","originIcon","iconSize","iconAnchor","popupAnchor","tooltipAnchor","shadowSize","destinationIcon","MapClickHandler","_ref","onMapClick","selectMode","click","e","latlng","MapCenter","_ref2","center","zoom","shouldCenter","map","setView","getZoom","MapSelector","_ref3","origin","destination","onOriginSelect","onDestinationSelect","centerOnOrigin","mapReady","setMapReady","handleMapClick","mode","coords","lat","lng","defaultCenter","defaultZoom","className","children","style","height","width","borderRadius","attribution","url","position","icon"],"sources":["/Users/linmat/Documents/GitHub/Reversed-RideSmart/frontend/src/MapSelector.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, useMapEvents, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport './MapSelector.css';\n\n// Fix for default marker icons in react-leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n});\n\n// Custom icon for origin (green)\nconst originIcon = new L.Icon({\n  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  tooltipAnchor: [16, -28],\n  shadowSize: [41, 41]\n});\n\n// Custom icon for destination (red)\nconst destinationIcon = new L.Icon({\n  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  tooltipAnchor: [16, -28],\n  shadowSize: [41, 41]\n});\n\n// Component to handle map clicks\nfunction MapClickHandler({ onMapClick, selectMode }) {\n  useMapEvents({\n    click(e) {\n      if (selectMode === 'origin' || selectMode === 'destination') {\n        onMapClick(e.latlng, selectMode);\n      }\n    },\n  });\n  return null;\n}\n\n// Component to center map on a specific location (only used when explicitly needed)\nfunction MapCenter({ center, zoom, shouldCenter }) {\n  const map = useMap();\n  useEffect(() => {\n    if (shouldCenter && center) {\n      map.setView(center, zoom || map.getZoom());\n    }\n  }, [shouldCenter, center, zoom, map]);\n  return null;\n}\n\nfunction MapSelector({ origin, destination, onOriginSelect, onDestinationSelect, selectMode, centerOnOrigin }) {\n  const [mapReady, setMapReady] = useState(false);\n\n  useEffect(() => {\n    setMapReady(true);\n  }, []);\n\n  const handleMapClick = (latlng, mode) => {\n    const coords = {\n      lat: latlng.lat,\n      lng: latlng.lng\n    };\n\n    if (mode === 'origin') {\n      onOriginSelect(coords);\n    } else if (mode === 'destination') {\n      onDestinationSelect(coords);\n    }\n  };\n\n  // Default center (University of Chicago area)\n  const defaultCenter = [41.788064, -87.601145];\n  const defaultZoom = 13;\n\n  if (!mapReady) {\n    return <div className=\"map-loading\">Loading map...</div>;\n  }\n\n  return (\n    <div className=\"map-selector-container\">\n      <MapContainer\n        center={defaultCenter}\n        zoom={defaultZoom}\n        style={{ height: '400px', width: '100%', borderRadius: '12px' }}\n        className=\"map-container\"\n      >\n        <TileLayer\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        {centerOnOrigin && origin && (\n          <MapCenter center={[origin.lat, origin.lng]} zoom={15} shouldCenter={centerOnOrigin} />\n        )}\n        <MapClickHandler onMapClick={handleMapClick} selectMode={selectMode} />\n        {origin && (\n          <Marker position={[origin.lat, origin.lng]} icon={originIcon}>\n          </Marker>\n        )}\n        {destination && (\n          <Marker position={[destination.lat, destination.lng]} icon={destinationIcon}>\n          </Marker>\n        )}\n      </MapContainer>\n      <div className=\"map-instructions\">\n        {selectMode === 'origin' && (\n          <p>Click on the map to set the <strong>origin</strong> (green marker)</p>\n        )}\n        {selectMode === 'destination' && (\n          <p>Click on the map to set the <strong>destination</strong> (red marker)</p>\n        )}\n        {selectMode === 'none' && origin && destination && (\n          <p>Both locations selected. Click \"Search for Rides\" to continue.</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default MapSelector;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}