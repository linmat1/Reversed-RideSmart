{"ast":null,"code":"import React,{useEffect,useMemo,useRef,useState}from'react';import'./BookingStatusPanel.css';import{getApiBase}from'./config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function formatStatus(status){if(!status)return'idle';return String(status);}function BookingStatusPanel(){const API_BASE=getApiBase();const[snapshot,setSnapshot]=useState(null);const[connected,setConnected]=useState(false);const[collapsed,setCollapsed]=useState(()=>{try{return localStorage.getItem('bookingStatusCollapsed')==='true';}catch(_unused){return false;}});const[error,setError]=useState(null);const[cancellingRideIds,setCancellingRideIds]=useState(()=>new Set());const pollingRef=useRef(null);const eventSourceRef=useRef(null);const users=useMemo(()=>(snapshot===null||snapshot===void 0?void 0:snapshot.users)||[],[snapshot]);const fetchSnapshot=async()=>{try{const res=await fetch(\"\".concat(API_BASE,\"/api/status\"));if(!res.ok)throw new Error(\"HTTP \".concat(res.status));const data=await res.json();setSnapshot(data);setError(null);}catch(e){setError((e===null||e===void 0?void 0:e.message)||'failed to load status');}};const startPolling=()=>{if(pollingRef.current)return;pollingRef.current=setInterval(()=>{fetchSnapshot();},3000);};const stopPolling=()=>{if(pollingRef.current){clearInterval(pollingRef.current);pollingRef.current=null;}};useEffect(()=>{// Always fetch an initial snapshot.\nfetchSnapshot();// Prefer SSE for real-time sync across all clients.\ntry{const es=new EventSource(\"\".concat(API_BASE,\"/api/status/stream\"));eventSourceRef.current=es;es.onopen=()=>{setConnected(true);setError(null);stopPolling();};es.onmessage=evt=>{try{const payload=JSON.parse(evt.data);if((payload===null||payload===void 0?void 0:payload.type)==='snapshot'){setSnapshot(payload.data);}}catch(_unused2){// ignore parse errors\n}};es.onerror=()=>{setConnected(false);// Fall back to polling. Mobile networks can be flaky; polling keeps UI in sync.\nstartPolling();try{es.close();}catch(_unused3){// ignore\n}};}catch(e){setConnected(false);startPolling();}return()=>{stopPolling();if(eventSourceRef.current){try{eventSourceRef.current.close();}catch(_unused4){// ignore\n}eventSourceRef.current=null;}};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{try{localStorage.setItem('bookingStatusCollapsed',String(collapsed));}catch(_unused5){// ignore\n}},[collapsed]);const cancelRide=async(userKey,rideId)=>{setCancellingRideIds(prev=>{const next=new Set(prev);next.add(rideId);return next;});try{const res=await fetch(\"\".concat(API_BASE,\"/api/lyft/cancel-booking\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:userKey,ride_id:rideId})});const data=await res.json().catch(()=>({}));if(!res.ok||!data.success){throw new Error((data===null||data===void 0?void 0:data.message)||\"cancel failed (HTTP \".concat(res.status,\")\"));}// Snapshot should update via SSE/polling; also do a quick refresh.\nfetchSnapshot();}catch(e){setError((e===null||e===void 0?void 0:e.message)||'cancel failed');}finally{setCancellingRideIds(prev=>{const next=new Set(prev);next.delete(rideId);return next;});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"booking-status-panel\",\"aria-label\":\"Booking status panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking-status-header\",onClick:()=>setCollapsed(c=>!c),role:\"button\",tabIndex:0,onKeyDown:e=>{if(e.key==='Enter'||e.key===' ')setCollapsed(c=>!c);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking-status-title\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Bookings\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"booking-status-conn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"booking-dot \".concat(connected?'connected':'')}),connected?'live':'polling']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking-status-actions\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"booking-status-btn\",onClick:fetchSnapshot,type:\"button\",children:\"Refresh\"}),/*#__PURE__*/_jsx(\"button\",{className:\"booking-status-btn\",onClick:()=>setCollapsed(c=>!c),type:\"button\",children:collapsed?'Open':'Hide'})]})]}),!collapsed&&/*#__PURE__*/_jsxs(\"div\",{className:\"booking-status-body\",children:[error&&/*#__PURE__*/_jsxs(\"div\",{className:\"booking-empty\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",error]}),users.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"booking-empty\",children:\"No users loaded (check backend `.env` user variables).\"}),users.map(u=>{const rides=u.active_rides||[];const status=formatStatus(u.status);return/*#__PURE__*/_jsxs(\"div\",{className:\"booking-user\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking-user-top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"booking-user-name\",children:u.user_name}),/*#__PURE__*/_jsx(\"div\",{className:\"booking-user-status\",children:status})]}),u.message?/*#__PURE__*/_jsx(\"div\",{className:\"booking-user-message\",children:u.message}):null,rides.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"booking-empty\",children:[u.user_name,\": none in progress\"]}):/*#__PURE__*/_jsx(\"div\",{className:\"booking-rides\",children:rides.map(r=>/*#__PURE__*/_jsxs(\"div\",{className:\"booking-ride\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking-ride-left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking-ride-type\",children:[r.ride_type||'Ride',\" booked\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking-ride-id\",children:[\"id: \",r.ride_id]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"booking-cancel-btn\",type:\"button\",onClick:()=>cancelRide(u.user_key,r.ride_id),disabled:cancellingRideIds.has(r.ride_id),children:cancellingRideIds.has(r.ride_id)?'Cancelling…':'Cancel'})]},\"\".concat(u.user_key,\"-\").concat(r.ride_id)))})]},u.user_key);})]})]});}export default BookingStatusPanel;","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","getApiBase","jsx","_jsx","jsxs","_jsxs","formatStatus","status","String","BookingStatusPanel","API_BASE","snapshot","setSnapshot","connected","setConnected","collapsed","setCollapsed","localStorage","getItem","_unused","error","setError","cancellingRideIds","setCancellingRideIds","Set","pollingRef","eventSourceRef","users","fetchSnapshot","res","fetch","concat","ok","Error","data","json","e","message","startPolling","current","setInterval","stopPolling","clearInterval","es","EventSource","onopen","onmessage","evt","payload","JSON","parse","type","_unused2","onerror","close","_unused3","_unused4","setItem","_unused5","cancelRide","userKey","rideId","prev","next","add","method","headers","body","stringify","user_id","ride_id","catch","success","delete","className","children","onClick","c","role","tabIndex","onKeyDown","key","stopPropagation","length","map","u","rides","active_rides","user_name","r","ride_type","user_key","disabled","has"],"sources":["/Users/linmat/Documents/GitHub/Reversed-RideSmart/frontend/src/BookingStatusPanel.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport './BookingStatusPanel.css';\nimport { getApiBase } from './config';\n\nfunction formatStatus(status) {\n  if (!status) return 'idle';\n  return String(status);\n}\n\nfunction BookingStatusPanel() {\n  const API_BASE = getApiBase();\n  const [snapshot, setSnapshot] = useState(null);\n  const [connected, setConnected] = useState(false);\n  const [collapsed, setCollapsed] = useState(() => {\n    try {\n      return localStorage.getItem('bookingStatusCollapsed') === 'true';\n    } catch {\n      return false;\n    }\n  });\n  const [error, setError] = useState(null);\n  const [cancellingRideIds, setCancellingRideIds] = useState(() => new Set());\n\n  const pollingRef = useRef(null);\n  const eventSourceRef = useRef(null);\n\n  const users = useMemo(() => snapshot?.users || [], [snapshot]);\n\n  const fetchSnapshot = async () => {\n    try {\n      const res = await fetch(`${API_BASE}/api/status`);\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      const data = await res.json();\n      setSnapshot(data);\n      setError(null);\n    } catch (e) {\n      setError(e?.message || 'failed to load status');\n    }\n  };\n\n  const startPolling = () => {\n    if (pollingRef.current) return;\n    pollingRef.current = setInterval(() => {\n      fetchSnapshot();\n    }, 3000);\n  };\n\n  const stopPolling = () => {\n    if (pollingRef.current) {\n      clearInterval(pollingRef.current);\n      pollingRef.current = null;\n    }\n  };\n\n  useEffect(() => {\n    // Always fetch an initial snapshot.\n    fetchSnapshot();\n\n    // Prefer SSE for real-time sync across all clients.\n    try {\n      const es = new EventSource(`${API_BASE}/api/status/stream`);\n      eventSourceRef.current = es;\n\n      es.onopen = () => {\n        setConnected(true);\n        setError(null);\n        stopPolling();\n      };\n\n      es.onmessage = (evt) => {\n        try {\n          const payload = JSON.parse(evt.data);\n          if (payload?.type === 'snapshot') {\n            setSnapshot(payload.data);\n          }\n        } catch {\n          // ignore parse errors\n        }\n      };\n\n      es.onerror = () => {\n        setConnected(false);\n        // Fall back to polling. Mobile networks can be flaky; polling keeps UI in sync.\n        startPolling();\n        try {\n          es.close();\n        } catch {\n          // ignore\n        }\n      };\n    } catch (e) {\n      setConnected(false);\n      startPolling();\n    }\n\n    return () => {\n      stopPolling();\n      if (eventSourceRef.current) {\n        try {\n          eventSourceRef.current.close();\n        } catch {\n          // ignore\n        }\n        eventSourceRef.current = null;\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem('bookingStatusCollapsed', String(collapsed));\n    } catch {\n      // ignore\n    }\n  }, [collapsed]);\n\n  const cancelRide = async (userKey, rideId) => {\n    setCancellingRideIds(prev => {\n      const next = new Set(prev);\n      next.add(rideId);\n      return next;\n    });\n\n    try {\n      const res = await fetch(`${API_BASE}/api/lyft/cancel-booking`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ user_id: userKey, ride_id: rideId })\n      });\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok || !data.success) {\n        throw new Error(data?.message || `cancel failed (HTTP ${res.status})`);\n      }\n      // Snapshot should update via SSE/polling; also do a quick refresh.\n      fetchSnapshot();\n    } catch (e) {\n      setError(e?.message || 'cancel failed');\n    } finally {\n      setCancellingRideIds(prev => {\n        const next = new Set(prev);\n        next.delete(rideId);\n        return next;\n      });\n    }\n  };\n\n  return (\n    <div className=\"booking-status-panel\" aria-label=\"Booking status panel\">\n      <div\n        className=\"booking-status-header\"\n        onClick={() => setCollapsed(c => !c)}\n        role=\"button\"\n        tabIndex={0}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter' || e.key === ' ') setCollapsed(c => !c);\n        }}\n      >\n        <div className=\"booking-status-title\">\n          <span>Bookings</span>\n          <span className=\"booking-status-conn\">\n            <span className={`booking-dot ${connected ? 'connected' : ''}`} />\n            {connected ? 'live' : 'polling'}\n          </span>\n        </div>\n        <div className=\"booking-status-actions\" onClick={(e) => e.stopPropagation()}>\n          <button className=\"booking-status-btn\" onClick={fetchSnapshot} type=\"button\">\n            Refresh\n          </button>\n          <button className=\"booking-status-btn\" onClick={() => setCollapsed(c => !c)} type=\"button\">\n            {collapsed ? 'Open' : 'Hide'}\n          </button>\n        </div>\n      </div>\n\n      {!collapsed && (\n        <div className=\"booking-status-body\">\n          {error && (\n            <div className=\"booking-empty\">\n              <strong>Error:</strong> {error}\n            </div>\n          )}\n\n          {users.length === 0 && (\n            <div className=\"booking-empty\">\n              No users loaded (check backend `.env` user variables).\n            </div>\n          )}\n\n          {users.map((u) => {\n            const rides = u.active_rides || [];\n            const status = formatStatus(u.status);\n            return (\n              <div className=\"booking-user\" key={u.user_key}>\n                <div className=\"booking-user-top\">\n                  <div className=\"booking-user-name\">{u.user_name}</div>\n                  <div className=\"booking-user-status\">{status}</div>\n                </div>\n                {u.message ? <div className=\"booking-user-message\">{u.message}</div> : null}\n\n                {rides.length === 0 ? (\n                  <div className=\"booking-empty\">{u.user_name}: none in progress</div>\n                ) : (\n                  <div className=\"booking-rides\">\n                    {rides.map((r) => (\n                      <div className=\"booking-ride\" key={`${u.user_key}-${r.ride_id}`}>\n                        <div className=\"booking-ride-left\">\n                          <div className=\"booking-ride-type\">\n                            {r.ride_type || 'Ride'} booked\n                          </div>\n                          <div className=\"booking-ride-id\">id: {r.ride_id}</div>\n                        </div>\n                        <button\n                          className=\"booking-cancel-btn\"\n                          type=\"button\"\n                          onClick={() => cancelRide(u.user_key, r.ride_id)}\n                          disabled={cancellingRideIds.has(r.ride_id)}\n                        >\n                          {cancellingRideIds.has(r.ride_id) ? 'Cancelling…' : 'Cancel'}\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default BookingStatusPanel;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}