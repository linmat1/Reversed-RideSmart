{"ast":null,"code":"var _jsxFileName = \"/Users/linmat/Documents/GitHub/Reversed-RideSmart/frontend/src/DeveloperPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport './DeveloperPanel.css';\nimport { getApiBase } from './config';\n\n/** Never replace a non-empty log with an empty one (avoids log disappearing when backend returns partial data). */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction mergeSnapshot(prev, next) {\n  var _prev$ride_log, _prev$access_log, _prev$orchestrator_lo;\n  if (!next || typeof next !== 'object') return prev;\n  const prevRides = (_prev$ride_log = prev === null || prev === void 0 ? void 0 : prev.ride_log) !== null && _prev$ride_log !== void 0 ? _prev$ride_log : [];\n  const prevAccess = (_prev$access_log = prev === null || prev === void 0 ? void 0 : prev.access_log) !== null && _prev$access_log !== void 0 ? _prev$access_log : [];\n  const nextRides = Array.isArray(next.ride_log) ? next.ride_log : [];\n  const nextAccess = Array.isArray(next.access_log) ? next.access_log : [];\n  const nextOrchestrator = Array.isArray(next.orchestrator_log) ? next.orchestrator_log : (_prev$orchestrator_lo = prev === null || prev === void 0 ? void 0 : prev.orchestrator_log) !== null && _prev$orchestrator_lo !== void 0 ? _prev$orchestrator_lo : [];\n  return {\n    ...next,\n    ride_log: nextRides.length > 0 ? nextRides : prevRides.length > 0 ? prevRides : nextRides,\n    access_log: nextAccess.length > 0 ? nextAccess : prevAccess.length > 0 ? prevAccess : nextAccess,\n    orchestrator_log: nextOrchestrator\n  };\n}\nfunction DeveloperPanel({\n  onClose\n}) {\n  _s();\n  const API_BASE = getApiBase();\n  const [activeTab, setActiveTab] = useState('rides');\n  const [snapshot, setSnapshot] = useState({\n    ride_log: [],\n    access_log: [],\n    orchestrator_log: []\n  });\n  const [connected, setConnected] = useState(false);\n  const [cancellingRideIds, setCancellingRideIds] = useState(() => new Set());\n  const [error, setError] = useState(null);\n  const [storageInfo, setStorageInfo] = useState(null);\n  const eventSourceRef = useRef(null);\n\n  // Show which DB backend uses (postgres = persists; sqlite on Vercel does not)\n  useEffect(() => {\n    let cancelled = false;\n    fetch(`${API_BASE}/api/developer/storage`).then(res => res.ok ? res.json() : null).then(data => {\n      if (!cancelled && data) setStorageInfo(data);\n    }).catch(() => {});\n    return () => {\n      cancelled = true;\n    };\n  }, [API_BASE]);\n\n  // SSE for live updates (when this tab hits the same instance that got the write)\n  useEffect(() => {\n    const es = new EventSource(`${API_BASE}/api/developer/stream`);\n    eventSourceRef.current = es;\n    es.onopen = () => {\n      setConnected(true);\n      setError(null);\n    };\n    es.onmessage = evt => {\n      try {\n        const payload = JSON.parse(evt.data);\n        if ((payload === null || payload === void 0 ? void 0 : payload.type) === 'snapshot' && payload !== null && payload !== void 0 && payload.data) {\n          const next = payload.data;\n          setSnapshot(prev => mergeSnapshot(prev, next));\n        }\n      } catch {\n        // ignore\n      }\n    };\n    es.onerror = () => {\n      setConnected(false);\n      try {\n        es.close();\n      } catch {}\n    };\n    return () => {\n      if (eventSourceRef.current) {\n        try {\n          eventSourceRef.current.close();\n        } catch {}\n        eventSourceRef.current = null;\n      }\n    };\n  }, [API_BASE]);\n\n  // Poll snapshot every 5s so all tabs/incognito see same data (backend reads from DB when Postgres is set)\n  useEffect(() => {\n    const fetchSnapshot = async () => {\n      try {\n        const res = await fetch(`${API_BASE}/api/developer/snapshot`);\n        if (res.ok) {\n          const data = await res.json();\n          setSnapshot(prev => mergeSnapshot(prev, data));\n        }\n      } catch {\n        // ignore\n      }\n    };\n    fetchSnapshot();\n    const interval = setInterval(fetchSnapshot, 5000);\n    return () => clearInterval(interval);\n  }, [API_BASE]);\n  const cancelRide = async (userKey, rideId) => {\n    const key = `${userKey}-${rideId}`;\n    setCancellingRideIds(prev => new Set(prev).add(key));\n    setError(null);\n    try {\n      const res = await fetch(`${API_BASE}/api/lyft/cancel-booking`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user_id: userKey,\n          ride_id: rideId\n        })\n      });\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok || !data.success) {\n        throw new Error((data === null || data === void 0 ? void 0 : data.message) || `Cancel failed (HTTP ${res.status})`);\n      }\n    } catch (e) {\n      setError((e === null || e === void 0 ? void 0 : e.message) || 'Cancel failed');\n    } finally {\n      setCancellingRideIds(prev => {\n        const next = new Set(prev);\n        next.delete(key);\n        return next;\n      });\n    }\n  };\n  const rideLog = snapshot.ride_log || [];\n  const accessLog = snapshot.access_log || [];\n  const orchestratorLog = snapshot.orchestrator_log || [];\n  const formatTs = ts => {\n    if (!ts) return '—';\n    try {\n      const d = new Date(ts * 1000);\n      return d.toLocaleString();\n    } catch {\n      return String(ts);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"developer-panel-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"developer-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"developer-panel-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Developer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `developer-panel-live ${connected ? 'connected' : ''}`,\n          children: connected ? 'live' : 'reconnecting…'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), storageInfo && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"developer-panel-storage\",\n          title: storageInfo.note || '',\n          children: [\"Storage: \", storageInfo.storage === 'postgres' ? 'Postgres (persists)' : `SQLite${storageInfo.path ? ` — not persisting on serverless` : ''}`]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"developer-panel-close\",\n          onClick: onClose,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"developer-panel-error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"developer-panel-tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: `developer-tab ${activeTab === 'rides' ? 'active' : ''}`,\n          onClick: () => setActiveTab('rides'),\n          children: \"Individual ride status log\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: `developer-tab ${activeTab === 'users' ? 'active' : ''}`,\n          onClick: () => setActiveTab('users'),\n          children: \"User log\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: `developer-tab ${activeTab === 'orchestrator' ? 'active' : ''}`,\n          onClick: () => setActiveTab('orchestrator'),\n          children: \"User-facing logs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"developer-panel-body\",\n        children: [activeTab === 'rides' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"developer-ride-log\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"developer-ride-log-desc\",\n            children: \"All rides booked (filler and Lyft). Cancel button only for rides still active. \\\"Cancelled\\\" appears only after the external server confirms the cancellation.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this), rideLog.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"developer-empty\",\n            children: \"No rides in log yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"developer-ride-list\",\n            children: rideLog.map(entry => {\n              var _entry$ride_id, _entry$ride_id2, _entry$lyft_for_user_;\n              const rideId = (_entry$ride_id = entry.ride_id) !== null && _entry$ride_id !== void 0 ? _entry$ride_id : entry.prescheduled_ride_id;\n              const canCancel = !entry.cancelled && ((_entry$ride_id2 = entry.ride_id) !== null && _entry$ride_id2 !== void 0 ? _entry$ride_id2 : entry.prescheduled_ride_id);\n              const cancelKey = `${entry.user_key}-${rideId}`;\n              const isCancelling = cancellingRideIds.has(cancelKey);\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"developer-ride-entry\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"developer-ride-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"developer-ride-type\",\n                    children: entry.ride_type\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"developer-ride-source\",\n                    children: entry.source === 'orchestrator' ? 'Lyft booker' : 'Individual booking'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 27\n                  }, this), entry.cancelled && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"developer-ride-cancelled\",\n                    children: \"Cancelled\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 29\n                  }, this), canCancel && /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"developer-cancel-btn\",\n                    onClick: () => cancelRide(entry.user_key, rideId),\n                    disabled: isCancelling,\n                    children: isCancelling ? 'Cancelling…' : 'Cancel'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"developer-ride-meta\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"User: \", entry.user_name, \" (\", entry.user_key, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Ride ID: \", String(rideId !== null && rideId !== void 0 ? rideId : '—')]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Created: \", formatTs(entry.created_at)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 27\n                  }, this), entry.cancelled_at != null && /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Cancelled: \", formatTs(entry.cancelled_at)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 25\n                }, this), entry.source === 'orchestrator' && entry.lyft_for_user_key && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"developer-ride-lyft-for\",\n                  children: [\"Lyft for: \", (_entry$lyft_for_user_ = entry.lyft_for_user_name) !== null && _entry$lyft_for_user_ !== void 0 ? _entry$lyft_for_user_ : entry.lyft_for_user_key]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 27\n                }, this)]\n              }, entry.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this), activeTab === 'users' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"developer-user-log\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"developer-user-log-desc\",\n            children: \"IP address and time (and other details) when the website was accessed.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this), accessLog.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"developer-empty\",\n            children: \"No access log entries yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"developer-access-list\",\n            children: accessLog.map(entry => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"developer-access-entry\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"developer-access-ip\",\n                children: entry.ip\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"developer-access-time\",\n                children: formatTs(entry.created_at)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"developer-access-ua\",\n                title: entry.user_agent,\n                children: entry.user_agent || '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 23\n              }, this), entry.path && entry.path !== '/' && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"developer-access-path\",\n                children: entry.path\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 25\n              }, this)]\n            }, entry.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this), activeTab === 'orchestrator' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"developer-orchestrator-log\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"developer-orchestrator-log-desc\",\n            children: \"Same log shown to the user when they run the Lyft orchestrator (latest run).\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this), orchestratorLog.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"developer-empty\",\n            children: \"No orchestrator log yet. Run the Lyft orchestrator to see it here.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"pre\", {\n            className: \"developer-orchestrator-log-content\",\n            children: orchestratorLog.join('\\n')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n}\n_s(DeveloperPanel, \"JT0aRxDne0B5jB7XUfjbc6MydKg=\");\n_c = DeveloperPanel;\nexport default DeveloperPanel;\nvar _c;\n$RefreshReg$(_c, \"DeveloperPanel\");","map":{"version":3,"names":["React","useEffect","useRef","useState","getApiBase","jsxDEV","_jsxDEV","mergeSnapshot","prev","next","_prev$ride_log","_prev$access_log","_prev$orchestrator_lo","prevRides","ride_log","prevAccess","access_log","nextRides","Array","isArray","nextAccess","nextOrchestrator","orchestrator_log","length","DeveloperPanel","onClose","_s","API_BASE","activeTab","setActiveTab","snapshot","setSnapshot","connected","setConnected","cancellingRideIds","setCancellingRideIds","Set","error","setError","storageInfo","setStorageInfo","eventSourceRef","cancelled","fetch","then","res","ok","json","data","catch","es","EventSource","current","onopen","onmessage","evt","payload","JSON","parse","type","onerror","close","fetchSnapshot","interval","setInterval","clearInterval","cancelRide","userKey","rideId","key","add","method","headers","body","stringify","user_id","ride_id","success","Error","message","status","e","delete","rideLog","accessLog","orchestratorLog","formatTs","ts","d","Date","toLocaleString","String","className","children","fileName","_jsxFileName","lineNumber","columnNumber","title","note","storage","path","onClick","map","entry","_entry$ride_id","_entry$ride_id2","_entry$lyft_for_user_","prescheduled_ride_id","canCancel","cancelKey","user_key","isCancelling","has","ride_type","source","disabled","user_name","created_at","cancelled_at","lyft_for_user_key","lyft_for_user_name","id","ip","user_agent","join","_c","$RefreshReg$"],"sources":["/Users/linmat/Documents/GitHub/Reversed-RideSmart/frontend/src/DeveloperPanel.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport './DeveloperPanel.css';\nimport { getApiBase } from './config';\n\n/** Never replace a non-empty log with an empty one (avoids log disappearing when backend returns partial data). */\nfunction mergeSnapshot(prev, next) {\n  if (!next || typeof next !== 'object') return prev;\n  const prevRides = prev?.ride_log ?? [];\n  const prevAccess = prev?.access_log ?? [];\n  const nextRides = Array.isArray(next.ride_log) ? next.ride_log : [];\n  const nextAccess = Array.isArray(next.access_log) ? next.access_log : [];\n  const nextOrchestrator = Array.isArray(next.orchestrator_log) ? next.orchestrator_log : (prev?.orchestrator_log ?? []);\n  return {\n    ...next,\n    ride_log: nextRides.length > 0 ? nextRides : prevRides.length > 0 ? prevRides : nextRides,\n    access_log: nextAccess.length > 0 ? nextAccess : prevAccess.length > 0 ? prevAccess : nextAccess,\n    orchestrator_log: nextOrchestrator,\n  };\n}\n\nfunction DeveloperPanel({ onClose }) {\n  const API_BASE = getApiBase();\n  const [activeTab, setActiveTab] = useState('rides');\n  const [snapshot, setSnapshot] = useState({ ride_log: [], access_log: [], orchestrator_log: [] });\n  const [connected, setConnected] = useState(false);\n  const [cancellingRideIds, setCancellingRideIds] = useState(() => new Set());\n  const [error, setError] = useState(null);\n  const [storageInfo, setStorageInfo] = useState(null);\n  const eventSourceRef = useRef(null);\n\n  // Show which DB backend uses (postgres = persists; sqlite on Vercel does not)\n  useEffect(() => {\n    let cancelled = false;\n    fetch(`${API_BASE}/api/developer/storage`)\n      .then((res) => (res.ok ? res.json() : null))\n      .then((data) => {\n        if (!cancelled && data) setStorageInfo(data);\n      })\n      .catch(() => {});\n    return () => { cancelled = true; };\n  }, [API_BASE]);\n\n  // SSE for live updates (when this tab hits the same instance that got the write)\n  useEffect(() => {\n    const es = new EventSource(`${API_BASE}/api/developer/stream`);\n    eventSourceRef.current = es;\n\n    es.onopen = () => {\n      setConnected(true);\n      setError(null);\n    };\n\n    es.onmessage = (evt) => {\n      try {\n        const payload = JSON.parse(evt.data);\n        if (payload?.type === 'snapshot' && payload?.data) {\n          const next = payload.data;\n          setSnapshot((prev) => mergeSnapshot(prev, next));\n        }\n      } catch {\n        // ignore\n      }\n    };\n\n    es.onerror = () => {\n      setConnected(false);\n      try {\n        es.close();\n      } catch {}\n    };\n\n    return () => {\n      if (eventSourceRef.current) {\n        try {\n          eventSourceRef.current.close();\n        } catch {}\n        eventSourceRef.current = null;\n      }\n    };\n  }, [API_BASE]);\n\n  // Poll snapshot every 5s so all tabs/incognito see same data (backend reads from DB when Postgres is set)\n  useEffect(() => {\n    const fetchSnapshot = async () => {\n      try {\n        const res = await fetch(`${API_BASE}/api/developer/snapshot`);\n        if (res.ok) {\n          const data = await res.json();\n          setSnapshot((prev) => mergeSnapshot(prev, data));\n        }\n      } catch {\n        // ignore\n      }\n    };\n    fetchSnapshot();\n    const interval = setInterval(fetchSnapshot, 5000);\n    return () => clearInterval(interval);\n  }, [API_BASE]);\n\n  const cancelRide = async (userKey, rideId) => {\n    const key = `${userKey}-${rideId}`;\n    setCancellingRideIds((prev) => new Set(prev).add(key));\n    setError(null);\n    try {\n      const res = await fetch(`${API_BASE}/api/lyft/cancel-booking`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ user_id: userKey, ride_id: rideId }),\n      });\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok || !data.success) {\n        throw new Error(data?.message || `Cancel failed (HTTP ${res.status})`);\n      }\n    } catch (e) {\n      setError(e?.message || 'Cancel failed');\n    } finally {\n      setCancellingRideIds((prev) => {\n        const next = new Set(prev);\n        next.delete(key);\n        return next;\n      });\n    }\n  };\n\n  const rideLog = snapshot.ride_log || [];\n  const accessLog = snapshot.access_log || [];\n  const orchestratorLog = snapshot.orchestrator_log || [];\n\n  const formatTs = (ts) => {\n    if (!ts) return '—';\n    try {\n      const d = new Date(ts * 1000);\n      return d.toLocaleString();\n    } catch {\n      return String(ts);\n    }\n  };\n\n  return (\n    <div className=\"developer-panel-overlay\">\n      <div className=\"developer-panel\">\n        <div className=\"developer-panel-header\">\n          <h1>Developer</h1>\n          <span className={`developer-panel-live ${connected ? 'connected' : ''}`}>\n            {connected ? 'live' : 'reconnecting…'}\n          </span>\n          {storageInfo && (\n            <span className=\"developer-panel-storage\" title={storageInfo.note || ''}>\n              Storage: {storageInfo.storage === 'postgres' ? 'Postgres (persists)' : `SQLite${storageInfo.path ? ` — not persisting on serverless` : ''}`}\n            </span>\n          )}\n          <button type=\"button\" className=\"developer-panel-close\" onClick={onClose}>\n            Close\n          </button>\n        </div>\n\n        {error && (\n          <div className=\"developer-panel-error\">{error}</div>\n        )}\n\n        <div className=\"developer-panel-tabs\">\n          <button\n            type=\"button\"\n            className={`developer-tab ${activeTab === 'rides' ? 'active' : ''}`}\n            onClick={() => setActiveTab('rides')}\n          >\n            Individual ride status log\n          </button>\n          <button\n            type=\"button\"\n            className={`developer-tab ${activeTab === 'users' ? 'active' : ''}`}\n            onClick={() => setActiveTab('users')}\n          >\n            User log\n          </button>\n          <button\n            type=\"button\"\n            className={`developer-tab ${activeTab === 'orchestrator' ? 'active' : ''}`}\n            onClick={() => setActiveTab('orchestrator')}\n          >\n            User-facing logs\n          </button>\n        </div>\n\n        <div className=\"developer-panel-body\">\n          {activeTab === 'rides' && (\n            <div className=\"developer-ride-log\">\n              <p className=\"developer-ride-log-desc\">\n                All rides booked (filler and Lyft). Cancel button only for rides still active. &quot;Cancelled&quot; appears only after the external server confirms the cancellation.\n              </p>\n              {rideLog.length === 0 ? (\n                <div className=\"developer-empty\">No rides in log yet.</div>\n              ) : (\n                <ul className=\"developer-ride-list\">\n                  {rideLog.map((entry) => {\n                    const rideId = entry.ride_id ?? entry.prescheduled_ride_id;\n                    const canCancel = !entry.cancelled && (entry.ride_id ?? entry.prescheduled_ride_id);\n                    const cancelKey = `${entry.user_key}-${rideId}`;\n                    const isCancelling = cancellingRideIds.has(cancelKey);\n\n                    return (\n                      <li key={entry.id} className=\"developer-ride-entry\">\n                        <div className=\"developer-ride-row\">\n                          <span className=\"developer-ride-type\">{entry.ride_type}</span>\n                          <span className=\"developer-ride-source\">\n                            {entry.source === 'orchestrator' ? 'Lyft booker' : 'Individual booking'}\n                          </span>\n                          {entry.cancelled && (\n                            <span className=\"developer-ride-cancelled\">Cancelled</span>\n                          )}\n                          {canCancel && (\n                            <button\n                              type=\"button\"\n                              className=\"developer-cancel-btn\"\n                              onClick={() => cancelRide(entry.user_key, rideId)}\n                              disabled={isCancelling}\n                            >\n                              {isCancelling ? 'Cancelling…' : 'Cancel'}\n                            </button>\n                          )}\n                        </div>\n                        <div className=\"developer-ride-meta\">\n                          <span>User: {entry.user_name} ({entry.user_key})</span>\n                          <span>Ride ID: {String(rideId ?? '—')}</span>\n                          <span>Created: {formatTs(entry.created_at)}</span>\n                          {entry.cancelled_at != null && (\n                            <span>Cancelled: {formatTs(entry.cancelled_at)}</span>\n                          )}\n                        </div>\n                        {entry.source === 'orchestrator' && entry.lyft_for_user_key && (\n                          <div className=\"developer-ride-lyft-for\">\n                            Lyft for: {entry.lyft_for_user_name ?? entry.lyft_for_user_key}\n                          </div>\n                        )}\n                      </li>\n                    );\n                  })}\n                </ul>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'users' && (\n            <div className=\"developer-user-log\">\n              <p className=\"developer-user-log-desc\">\n                IP address and time (and other details) when the website was accessed.\n              </p>\n              {accessLog.length === 0 ? (\n                <div className=\"developer-empty\">No access log entries yet.</div>\n              ) : (\n                <ul className=\"developer-access-list\">\n                  {accessLog.map((entry) => (\n                    <li key={entry.id} className=\"developer-access-entry\">\n                      <span className=\"developer-access-ip\">{entry.ip}</span>\n                      <span className=\"developer-access-time\">{formatTs(entry.created_at)}</span>\n                      <span className=\"developer-access-ua\" title={entry.user_agent}>\n                        {entry.user_agent || '—'}\n                      </span>\n                      {entry.path && entry.path !== '/' && (\n                        <span className=\"developer-access-path\">{entry.path}</span>\n                      )}\n                    </li>\n                  ))}\n                </ul>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'orchestrator' && (\n            <div className=\"developer-orchestrator-log\">\n              <p className=\"developer-orchestrator-log-desc\">\n                Same log shown to the user when they run the Lyft orchestrator (latest run).\n              </p>\n              {orchestratorLog.length === 0 ? (\n                <div className=\"developer-empty\">No orchestrator log yet. Run the Lyft orchestrator to see it here.</div>\n              ) : (\n                <pre className=\"developer-orchestrator-log-content\">\n                  {orchestratorLog.join('\\n')}\n                </pre>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default DeveloperPanel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}